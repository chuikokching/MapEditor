<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fill-in-the-blank text</title>
    <link rel="stylesheet" href="src/plugins/easy-button.css">
    <link rel="stylesheet" href="src/css/bootstrap.css">
    <link rel="stylesheet" href="src/leaflet.css">
    <link rel="stylesheet" href="src/plugins/L.Control.Sidebar.css">
    <script src="src/leaflet-src.js"></script>
    <script src="src/jquery-3.2.0.min.js"></script>
    <script src="https://leaflet.github.io/Path.Drag.js/src/Path.Drag.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript" src="src/js/XMLGenerator.js"></script>
    <script src="src/plugins/L.Control.MousePosition.js"></script>
    <script src="src/plugins/L.Control.Sidebar.js"></script>
    <script src="src/plugins/easy-button.js"></script>
    <script src="src/plugins/FileSaver.js-master/src/FileSaver.js"></script>

    <style>
        #mapdiv{
            height:100vh;
            text-align: center;
        }
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            text-align: center;
        }
    </style>
</head>
<body>
<div>
    <div id="mapdiv" class="col-md-12"></div>
    <div id="side-bar" class="col-md-10">
        <h4>Zoom Level: <span id='zoom-level'></span></h4>
        <h4>Map Center: <span id='map-center'></span></h4>
        <h4>Mouse Location: <span id='mouse-location'></span></h4>
        <br>
        <div>
            <button id="export_exerciseChain" class="btn btn-primary btn-block">ExerciseChain Export</button>
        </div>
        <br>
        <div>
            <button id="export_Stage" class="btn btn-primary btn-block">Stage Export</button>
        </div>
    </div>

</div>
<script type="text/javascript">
    var ctlMouseposition;
    var ctlSidebar;
    var ctlEasybutton;
    var output=[];
    var record=[];

    var badenwuerttemberg,badenwuerttemberg_array,badenwuerttemberg_imageBound,badenwuerttemberg_overlay;
    var bayern,bayern_array,bayern_imageBound,bayern_overlay;
    var berlin,berlin_array,berlin_imageBound,berlin_overlay;
    var hessen,hessen_array,hessen_imageBound,hessen_overlay;
    var nordrhein,nordrhein_array,nordrhein_imageBound,nordrhein_overlay;
    var rheinlandplatz,rheinlandplatz_array,rheinlandplatz_imageBound,rheinlandplatz_overlay;
    var saarland,saarland_array,saarland_imageBound,saarland_overlay;
    var sachsen, sachsen_array,sachsen_imageBound,sachsen_overlay;
    var tueringen,tueringen_array,tueringen_imageBound,tueringen_overlay;
    var SaxonyAnhalt, SaxonyAnhalt_array,SaxonyAnhalt_imageBound,SaxonyAnhalt_overlay;
    var SchleswingHolstein, SchleswingHolstein_array,SchleswingHolstein_imageBound,SchleswingHolstein_overlay;
    var MecklenburgVorpommern, MecklenburgVorpommern_array,MecklenburgVorpommern_imageBound,MecklenburgVorpommern_overlay;
    var Niedersachsen, Niedersachsen_array,Niedersachsen_imageBound,Niedersachsen_overlay;
    var Hamburg, Hamburg_array, Hamburg_imageBound,Hamburg_overlay;
    var Brandenburg, Brandenburg_array,Brandenburg_imageBound,Brandenburg_overlay;



    var mymap = L.map('mapdiv', {
        center:[51.02391, 11.57912],
        zoom:6,
        scrollWheelZoom:true,
        dragging: true,
        zoomControl: false,
        closePopupOnClick:false,
        attributionControl: false});

    L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png').addTo(mymap);
    mymap.options.maxZoom=7;
    mymap.options.minZoom=6;

    ctlSidebar = L.control.sidebar('side-bar').addTo(mymap);

    ctlMouseposition = L.control.mousePosition().addTo(mymap);

    ctlEasybutton = L.easyButton('glyphicon-transfer', function(){
        ctlSidebar.toggle();
    }).addTo(mymap);

    sachsen = L.imageOverlay('img-Bundesland/background.png',[[51.29788614754179,12.666463851928713],[50.81824572517489,14.004478454589846]]).addTo(mymap);
    badenwuerttemberg = L.imageOverlay('img-Bundesland/background.png',[[48.76371402200387,8.215970993041994],[48.06626452431942,9.908380508422853]]).addTo(mymap);
    bayern = L.imageOverlay('img-Bundesland/background.png',[[49.254753284557744,10.824022293090822],[48.483618004570395,12.641658782958986]]).addTo(mymap);
    berlin = L.imageOverlay('img-Bundesland/background.png',[[52.59496697023287,13.219213485717775],[52.419748717449544,13.64982604980469]]).addTo(mymap);
    saarland = L.imageOverlay('img-Bundesland/background.png',[[49.51322839625276,6.6790008544921875],[49.29389672854882,7.22951889038086]]).addTo(mymap);
    rheinlandplatz = L.imageOverlay('img-Bundesland/background.png',[[50.27568259030461,6.55686378479004],[49.754377168315045,7.742357254028321]]).addTo(mymap);
    nordrhein = L.imageOverlay('img-Bundesland/background.png',[[51.83869442188983,6.561155319213868],[51.085248131647475,8.448400497436525]]).addTo(mymap);
    hessen = L.imageOverlay('img-Bundesland/background.png',[[50.92630197325519,8.575687408447267],[50.42547171609858,9.804782867431642]]).addTo(mymap);
    tueringen = L.imageOverlay('img-Bundesland/background.png',[[51.11834052531011,10.318479537963869],[50.685909129613414,11.367244720458986]]).addTo(mymap);
    SaxonyAnhalt = L.imageOverlay('img-Bundesland/background.png',[[52.25919183822973,11.323243081569672],[51.890053935216926,12.099609822034836]]).addTo(mymap);
    SchleswingHolstein = L.imageOverlay('img-Bundesland/background.png',[[54.295156093819024,9.331055134534838],[53.951775568681086,10.283203125000002]]).addTo(mymap);
    MecklenburgVorpommern = L.imageOverlay('img-Bundesland/background.png',[[53.960394653308995,11.909179687500002],[53.53595456570721,13.139648437500002]]).addTo(mymap);
    Niedersachsen = L.imageOverlay('img-Bundesland/background.png',[[52.77618568896171,9.345704019069673],[52.286082186502085,10.634765625]]).addTo(mymap);
    Hamburg = L.imageOverlay('img-Bundesland/background.png',[[53.62726717387009,9.895020425319673],[53.46189043285914,10.187988728284836]]).addTo(mymap);
    Brandenburg = L.imageOverlay('img-Bundesland/background.png',[[52.16045455774706,13.300782144069673],[51.72702815704777,14.501953125000002]]).addTo(mymap);
    Bremen = L.imageOverlay('img-Bundesland/background.png',[[53.20822574276112,8.591308593750002],[53.03240463975814,8.942871093750002]]).addTo(mymap);

    sachsen_array = [[53.62061576164619,15.213661193847658],[54.08678448506706,15.213661193847658],
        [54.08678448506706,16.442756652832035],[53.62061576164619,16.442756652832035]];
    badenwuerttemberg_array = [[52.82719467351698,15.213661193847658],[53.3021078388038,15.213661193847658],
        [53.3021078388038,16.442756652832035],[52.82719467351698,16.442756652832035]];
    bayern_array = [[52.02545860348832,15.213661193847658],[52.509116855699666,15.213661193847658],
        [52.509116855699666,16.442756652832035],[52.02545860348832,16.442756652832035]];
    berlin_array = [[51.210351674364595,15.213661193847658],[51.70280534066533,15.213661193847658],
        [51.70280534066533,16.442756652832035],[51.210351674364595,16.442756652832035]];
    saarland_array = [[50.393554525267895,15.213661193847658],[50.894723470451275,15.213661193847658],
        [50.894723470451275,16.442756652832035],[50.393554525267895,16.442756652832035]];
    rheinlandplatz_array = [[49.558374684859075,15.213661193847658],[50.06835139525283,15.213661193847658],
        [50.06835139525283,16.442756652832035],[49.558374684859075,16.442756652832035]];
    nordrhein_array = [[48.71228782399066,15.213661193847658],[49.23107855770546,15.213661193847658],
        [49.23107855770546,16.442756652832035],[48.71228782399066,16.442756652832035]];
    tueringen_array = [[47.8558191314704,15.213661193847658],[48.38341859590002,15.213661193847658],
        [48.38341859590002,16.442756652832035],[47.8558191314704,16.442756652832035]];

    hessen_array = [[53.62061576164619,17.71744564175606], [54.08678448506706,17.71744564175606],
        [54.08678448506706,18.946541100740433], [53.62061576164619,18.946541100740433]];
    SaxonyAnhalt_array=[[52.82719467351698,17.71744564175606], [53.3021078388038,17.71744564175606],
        [53.3021078388038,18.946541100740433], [52.82719467351698,18.946541100740433]];
    SchleswingHolstein_array=[[52.02545860348832,17.71744564175606], [52.509116855699666,17.71744564175606],
        [52.509116855699666,18.946541100740433], [52.02545860348832,18.946541100740433]];
    MecklenburgVorpommern_array=[[51.210351674364595,17.71744564175606], [51.70280534066533,17.71744564175606],
        [51.70280534066533,18.946541100740433], [51.210351674364595,18.946541100740433]];
    Niedersachsen_array=[[50.393554525267895,17.71744564175606], [50.894723470451275,17.71744564175606],
        [50.894723470451275,18.946541100740433], [50.393554525267895,18.946541100740433]];
    Hamburg_array=[[49.558374684859075,17.71744564175606], [50.06835139525283,17.71744564175606],
        [50.06835139525283,18.946541100740433], [49.558374684859075,18.946541100740433]];
    Brandenburg_array=[[48.71228782399066,17.71744564175606], [49.23107855770546,17.71744564175606],
        [49.23107855770546,18.946541100740433], [48.71228782399066,18.946541100740433]];
    Bremen_array=[[47.8558191314704,17.71744564175606], [48.38341859590002,17.71744564175606],
        [48.38341859590002,18.946541100740433], [47.8558191314704,18.946541100740433]];


    sachsen_polygon = L.polygon((sachsen_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    badenwuerttemberg_polygon = L.polygon((badenwuerttemberg_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    bayern_polygon = L.polygon((bayern_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    berlin_polygon = L.polygon((berlin_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    saarland_polygon = L.polygon((saarland_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    rheinlandplatz_polygon = L.polygon((rheinlandplatz_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    nordrhein_polygon = L.polygon((nordrhein_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    hessen_polygon = L.polygon((hessen_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    tueringen_polygon = L.polygon((tueringen_array), {draggable: true, opacity: 0, fillOpacity: 0}).addTo(mymap);
    SaxonyAnhalt_polygon = L.polygon((SaxonyAnhalt_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);
    SchleswingHolstein_polygon = L.polygon((SchleswingHolstein_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);
    MecklenburgVorpommern_polygon = L.polygon((MecklenburgVorpommern_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);
    Niedersachsen_polygon = L.polygon((Niedersachsen_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);
    Hamburg_polygon = L.polygon((Hamburg_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);
    Brandenburg_polygon = L.polygon((Brandenburg_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);
    Bremen_polygon = L.polygon((Bremen_array),{draggable: true, opacity:0, fillOpacity:0}).addTo(mymap);


    sachsen_imageBound = L.latLngBounds([sachsen_array[0], sachsen_array[2]]);
    badenwuerttemberg_imageBound = L.latLngBounds([badenwuerttemberg_array[0], badenwuerttemberg_array[2]]);
    bayern_imageBound = L.latLngBounds([bayern_array[0], bayern_array[2]]);
    berlin_imageBound = L.latLngBounds([berlin_array[0], berlin_array[2]]);
    saarland_imageBound = L.latLngBounds([saarland_array[0], saarland_array[2]]);
    rheinlandplatz_imageBound = L.latLngBounds([rheinlandplatz_array[0], rheinlandplatz_array[2]]);
    nordrhein_imageBound = L.latLngBounds([nordrhein_array[0], nordrhein_array[2]]);
    hessen_imageBound = L.latLngBounds([hessen_array[0], hessen_array[2]]);
    tueringen_imageBound = L.latLngBounds([tueringen_array[0], tueringen_array[2]]);
    SaxonyAnhalt_imageBound = L.latLngBounds([SaxonyAnhalt_array[0], SaxonyAnhalt_array[2]]);
    SchleswingHolstein_imageBound = L.latLngBounds([SchleswingHolstein_array[0], SchleswingHolstein_array[2]]);
    MecklenburgVorpommern_imageBound = L.latLngBounds([MecklenburgVorpommern_array[0], MecklenburgVorpommern_array[2]]);
    Niedersachsen_imageBound = L.latLngBounds([Niedersachsen_array[0], Niedersachsen_array[2]]);
    Hamburg_imageBound = L.latLngBounds([Hamburg_array[0], Hamburg_array[2]]);
    Brandenburg_imageBound = L.latLngBounds([Brandenburg_array[0], Brandenburg_array[2]]);
    Bremen_imageBound = L.latLngBounds([Bremen_array[0], Bremen_array[2]]);


    sachsen_overlay = L.imageOverlay(('img-Bundesland/sachsen.png'),sachsen_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    badenwuerttemberg_overlay = L.imageOverlay(('img-Bundesland/Baden-W端rttemberg.png'),badenwuerttemberg_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    bayern_overlay = L.imageOverlay('img-Bundesland/Bayern.png',bayern_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    berlin_overlay = L.imageOverlay('img-Bundesland/Berlin.png',berlin_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    saarland_overlay = L.imageOverlay('img-Bundesland/Saarland.png',saarland_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    rheinlandplatz_overlay = L.imageOverlay(('img-Bundesland/Rheinland-Pfalz.png'),rheinlandplatz_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    nordrhein_overlay = L.imageOverlay('img-Bundesland/Nordrhein-Westfalen.png',nordrhein_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    hessen_overlay = L.imageOverlay('img-Bundesland/Hessen.png',hessen_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    tueringen_overlay = L.imageOverlay('img-Bundesland/Th端ringen.png',tueringen_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    SaxonyAnhalt_overlay= L.imageOverlay(('img-Bundesland/Sachsen-Anhalt.png'),SaxonyAnhalt_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    SchleswingHolstein_overlay = L.imageOverlay(('img-Bundesland/Schleswig.png'),SchleswingHolstein_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    MecklenburgVorpommern_overlay = L.imageOverlay(('img-Bundesland/Mecklenburg-Vorpommern.png'),MecklenburgVorpommern_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    Niedersachsen_overlay = L.imageOverlay(('img-Bundesland/Niedersachsen.png'),Niedersachsen_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    Hamburg_overlay = L.imageOverlay(('img-Bundesland/Hamburg.png'),Hamburg_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    Brandenburg_overlay = L.imageOverlay(('img-Bundesland/Brandenburg.png'),Brandenburg_imageBound,{opacity:1, interactive:true}).addTo(mymap);
    Bremen_overlay = L.imageOverlay(('img-Bundesland/Bremen.png'),Bremen_imageBound,{opacity:1, interactive:true}).addTo(mymap);



    sachsen_polygon.on('drag',function (e) {sachsen_overlay.setBounds(sachsen_polygon.getBounds());});
    sachsen_polygon.on('dragstart',function (e) {sachsen_overlay.setBounds(sachsen_polygon.getBounds());});
    sachsen_polygon.on('dragend',function (e) {sachsen_overlay.setBounds(sachsen_polygon.getBounds());
        if(Number(sachsen_polygon.getBounds().getNorthWest().lat)<51.596 && Number(sachsen_polygon.getBounds().getSouthEast().lng)<14.342
            &&Number(sachsen_polygon.getBounds().getSouthEast().lat)>50.507 && Number(sachsen_polygon.getBounds().getNorthWest().lng)>12.277)
        {swal({position: 'top-end', icon:"success", text: 'sachsen', buttons: false, timer: 1000});
            sachsen_overlay.setBounds(sachsen.getBounds());
            sachsen_polygon.dragging.disable();
            mymap.removeLayer(sachsen);}});

    badenwuerttemberg_polygon.on('drag',function (e) {badenwuerttemberg_overlay.setBounds(badenwuerttemberg_polygon.getBounds());});
    badenwuerttemberg_polygon.on('dragstart',function (e) {badenwuerttemberg_overlay.setBounds(badenwuerttemberg_polygon.getBounds());});
    badenwuerttemberg_polygon.on('dragend',function (e) {badenwuerttemberg_overlay.setBounds(badenwuerttemberg_polygon.getBounds());
        if(Number(badenwuerttemberg_polygon.getBounds().getNorthWest().lat)<48.900 && Number(badenwuerttemberg_polygon.getBounds().getSouthEast().lng)<10.127
            &&Number(badenwuerttemberg_polygon.getBounds().getSouthEast().lat)>47.929 && Number(badenwuerttemberg_polygon.getBounds().getNorthWest().lng)>8.010)
        {swal({position: 'top-end', icon:"success", text: 'Baden-W端rttemberg', buttons: false, timer: 1000});
            badenwuerttemberg_overlay.setBounds(badenwuerttemberg.getBounds());
            badenwuerttemberg_polygon.dragging.disable();
            mymap.removeLayer(badenwuerttemberg);}});

    bayern_polygon.on('drag',function (e) {bayern_overlay.setBounds(bayern_polygon.getBounds());});
    bayern_polygon.on('dragstart',function (e) {bayern_overlay.setBounds(bayern_polygon.getBounds());});
    bayern_polygon.on('dragend',function (e) {bayern_overlay.setBounds(bayern_polygon.getBounds());
        if(Number(bayern_polygon.getBounds().getNorthWest().lat)<49.444 && Number(bayern_polygon.getBounds().getSouthEast().lng)<12.924
            &&Number(bayern_polygon.getBounds().getSouthEast().lat)>48.355 && Number(bayern_polygon.getBounds().getNorthWest().lng)>10.576)
        {swal({position: 'top-end', icon:"success", text: 'Bayern', buttons: false, timer: 1000});
            bayern_overlay.setBounds(bayern.getBounds());
            bayern_polygon.dragging.disable();
            mymap.removeLayer(bayern);}});

    berlin_polygon.on('drag',function (e) {berlin_overlay.setBounds(berlin_polygon.getBounds());});
    berlin_polygon.on('dragstart',function (e) {berlin_overlay.setBounds(berlin_polygon.getBounds());});
    berlin_polygon.on('dragend',function (e) {berlin_overlay.setBounds(berlin_polygon.getBounds());
        if(Number(berlin_polygon.getBounds().getNorthWest().lat)<52.900 && Number(berlin_polygon.getBounds().getSouthEast().lng)<14.647
            &&Number(berlin_polygon.getBounds().getSouthEast().lat)>52.237 && Number(berlin_polygon.getBounds().getNorthWest().lng)>12.382)
        {swal({position: 'top-end', icon:"success", text: 'Berlin', buttons: false, timer: 1000});
            berlin_overlay.setBounds(berlin.getBounds());
            berlin_polygon.dragging.disable();
            mymap.removeLayer(berlin);}});

    saarland_polygon.on('drag',function (e) {saarland_overlay.setBounds(saarland_polygon.getBounds());});
    saarland_polygon.on('dragstart',function (e) {saarland_overlay.setBounds(saarland_polygon.getBounds());});
    saarland_polygon.on('dragend',function (e) {saarland_overlay.setBounds(saarland_polygon.getBounds());
        if(Number(saarland_polygon.getBounds().getNorthWest().lat)<49.781 && Number(saarland_polygon.getBounds().getSouthEast().lng)<8.065
            &&Number(saarland_polygon.getBounds().getSouthEast().lat)>48.908 && Number(saarland_polygon.getBounds().getNorthWest().lng)>5.870)
        {swal({position: 'top-end', icon:"success", text: 'Saarland', buttons: false, timer: 1000});
            saarland_overlay.setBounds(saarland.getBounds());
            saarland_polygon.dragging.disable();
            mymap.removeLayer(saarland);}});

    rheinlandplatz_polygon.on('drag',function (e) {rheinlandplatz_overlay.setBounds(rheinlandplatz_polygon.getBounds());});
    rheinlandplatz_polygon.on('dragstart',function (e) {rheinlandplatz_overlay.setBounds(rheinlandplatz_polygon.getBounds());});
    rheinlandplatz_polygon.on('dragend',function (e) {rheinlandplatz_overlay.setBounds(rheinlandplatz_polygon.getBounds());
        if(Number(rheinlandplatz_polygon.getBounds().getNorthWest().lat)<50.549 && Number(rheinlandplatz_polygon.getBounds().getSouthEast().lng)<8.274
            &&Number(rheinlandplatz_polygon.getBounds().getSouthEast().lat)>49.556 && Number(rheinlandplatz_polygon.getBounds().getNorthWest().lng)>6.049)
        {swal({position: 'top-end', icon:"success", text: 'Rheinland-Pflaz', buttons: false, timer: 1000});
            rheinlandplatz_overlay.setBounds(rheinlandplatz.getBounds());
            rheinlandplatz_polygon.dragging.disable();
            mymap.removeLayer(rheinlandplatz);}});

    nordrhein_polygon.on('drag',function (e) {nordrhein_overlay.setBounds(nordrhein_polygon.getBounds());});
    nordrhein_polygon.on('dragstart',function (e) {nordrhein_overlay.setBounds(nordrhein_polygon.getBounds());});
    nordrhein_polygon.on('dragend',function (e) {nordrhein_overlay.setBounds(nordrhein_polygon.getBounds());
        if(Number(nordrhein_polygon.getBounds().getNorthWest().lat)<52.019 && Number(nordrhein_polygon.getBounds().getSouthEast().lng)<8.735
            &&Number(nordrhein_polygon.getBounds().getSouthEast().lat)>50.895 && Number(nordrhein_polygon.getBounds().getNorthWest().lng)>6.294)
        {swal({position: 'top-end', icon:"success", text: 'Nordrhein-Westfalen', buttons: false, timer: 1000});
            nordrhein_overlay.setBounds(nordrhein.getBounds());
            nordrhein_polygon.dragging.disable();
            mymap.removeLayer(nordrhein);}});

    hessen_polygon.on('drag',function (e) {hessen_overlay.setBounds(hessen_polygon.getBounds());});
    hessen_polygon.on('dragstart',function (e) {hessen_overlay.setBounds(hessen_polygon.getBounds());});
    hessen_polygon.on('dragend',function (e) {hessen_overlay.setBounds(hessen_polygon.getBounds());
        if(Number(hessen_polygon.getBounds().getNorthWest().lat)<51.169 && Number(hessen_polygon.getBounds().getSouthEast().lng)<10.258
            &&Number(hessen_polygon.getBounds().getSouthEast().lat)>50.217 && Number(hessen_polygon.getBounds().getNorthWest().lng)>8.149)
        {swal({position: 'top-end', icon:"success", text: 'Hessen', buttons: false, timer: 1000});
            hessen_overlay.setBounds(hessen.getBounds());
            hessen_polygon.dragging.disable();
            mymap.removeLayer(hessen);}});

    tueringen_polygon.on('drag',function (e) {tueringen_overlay.setBounds(tueringen_polygon.getBounds());});
    tueringen_polygon.on('dragstart',function (e) {tueringen_overlay.setBounds(tueringen_polygon.getBounds());});
    tueringen_polygon.on('dragend',function (e) {tueringen_overlay.setBounds(tueringen_polygon.getBounds());
        if(Number(tueringen_polygon.getBounds().getNorthWest().lat)<51.371 && Number(tueringen_polygon.getBounds().getSouthEast().lng)<11.942
            &&Number(tueringen_polygon.getBounds().getSouthEast().lat)>50.405 && Number(tueringen_polygon.getBounds().getNorthWest().lng)>9.881)
        {swal({position: 'top-end', icon:"success", text: 'Th端ringen', buttons: false, timer: 1000});
            tueringen_overlay.setBounds(tueringen.getBounds());
            tueringen_polygon.dragging.disable();
            mymap.removeLayer(tueringen);}});

    SaxonyAnhalt_polygon.on('drag',function (e) {SaxonyAnhalt_overlay.setBounds(SaxonyAnhalt_polygon.getBounds());});
    SaxonyAnhalt_polygon.on('dragstart',function (e) {SaxonyAnhalt_overlay.setBounds(SaxonyAnhalt_polygon.getBounds());});
    SaxonyAnhalt_polygon.on('dragend',function (e) {SaxonyAnhalt_overlay.setBounds(SaxonyAnhalt_polygon.getBounds());
        if(Number(SaxonyAnhalt_polygon.getBounds().getNorthWest().lat)<53.25919183822973&& Number(SaxonyAnhalt_polygon.getBounds().getSouthEast().lng)<13.099609822034836
            &&Number(SaxonyAnhalt_polygon.getBounds().getSouthEast().lat)>50.890053935216926 && Number(SaxonyAnhalt_polygon.getBounds().getNorthWest().lng)>10.323243081569672)
        {swal({position: 'top-end', text: 'Sachsen-Anhalt', icon:"success", buttons: false, timer: 1000});
            SaxonyAnhalt_overlay.setBounds(SaxonyAnhalt.getBounds());
            SaxonyAnhalt_polygon.dragging.disable();
            mymap.removeLayer(SaxonyAnhalt);}});

    SchleswingHolstein_polygon.on('drag',function (e) {SchleswingHolstein_overlay.setBounds(SchleswingHolstein_polygon.getBounds());});
    SchleswingHolstein_polygon.on('dragstart',function (e) {SchleswingHolstein_overlay.setBounds(SchleswingHolstein_polygon.getBounds());});
    SchleswingHolstein_polygon.on('dragend',function (e) {SchleswingHolstein_overlay.setBounds(SchleswingHolstein_polygon.getBounds());
        if(Number(SchleswingHolstein_polygon.getBounds().getNorthWest().lat)<55.295156093819024&& Number(SchleswingHolstein_polygon.getBounds().getSouthEast().lng)<11.283203125000002
            &&Number(SchleswingHolstein_polygon.getBounds().getSouthEast().lat)>52.951775568681086 && Number(SchleswingHolstein_polygon.getBounds().getNorthWest().lng)>8.331055134534838)
        {swal({position: 'top-end', text: 'Schleswig-Holstein', icon:"success", buttons: false, timer: 1000});
            SchleswingHolstein_overlay.setBounds(SchleswingHolstein.getBounds());
            SchleswingHolstein_polygon.dragging.disable();
            mymap.removeLayer(SchleswingHolstein);}});

    MecklenburgVorpommern_polygon.on('drag',function (e) {MecklenburgVorpommern_overlay.setBounds(MecklenburgVorpommern_polygon.getBounds());});
    MecklenburgVorpommern_polygon.on('dragstart',function (e) {MecklenburgVorpommern_overlay.setBounds(MecklenburgVorpommern_polygon.getBounds());});
    MecklenburgVorpommern_polygon.on('dragend',function (e) {MecklenburgVorpommern_overlay.setBounds(MecklenburgVorpommern_polygon.getBounds());
        if(Number(MecklenburgVorpommern_polygon.getBounds().getNorthWest().lat)<54.960394653308995&& Number(MecklenburgVorpommern_polygon.getBounds().getSouthEast().lng)<14.139648437500002
            &&Number(MecklenburgVorpommern_polygon.getBounds().getSouthEast().lat)>52.53595456570721 && Number(MecklenburgVorpommern_polygon.getBounds().getNorthWest().lng)>10.909179687500002)
        {swal({position: 'top-end', text: 'Mecklenburg-Vorpommern', icon:"success", buttons: false, timer: 1000});
            MecklenburgVorpommern_overlay.setBounds(MecklenburgVorpommern.getBounds());
            MecklenburgVorpommern_polygon.dragging.disable();
            mymap.removeLayer(MecklenburgVorpommern);}});

    Niedersachsen_polygon.on('drag',function (e) {Niedersachsen_overlay.setBounds(Niedersachsen_polygon.getBounds());});
    Niedersachsen_polygon.on('dragstart',function (e) {Niedersachsen_overlay.setBounds(Niedersachsen_polygon.getBounds());});
    Niedersachsen_polygon.on('dragend',function (e) {Niedersachsen_overlay.setBounds(Niedersachsen_polygon.getBounds());
        if(Number(Niedersachsen_polygon.getBounds().getNorthWest().lat)<53.77618568896171&& Number(Niedersachsen_polygon.getBounds().getSouthEast().lng)<11.634765625
            &&Number(Niedersachsen_polygon.getBounds().getSouthEast().lat)>51.286082186502085 && Number(Niedersachsen_polygon.getBounds().getNorthWest().lng)>8.345704019069673)
        {swal({position: 'top-end', text: 'Niedersachsen', icon:"success", buttons: false, timer: 1000});
            Niedersachsen_overlay.setBounds(Niedersachsen.getBounds());
            Niedersachsen_polygon.dragging.disable();
            mymap.removeLayer(Niedersachsen);}});

    Hamburg_polygon.on('drag',function (e) {Hamburg_overlay.setBounds(Hamburg_polygon.getBounds());});
    Hamburg_polygon.on('dragstart',function (e) {Hamburg_overlay.setBounds(Hamburg_polygon.getBounds());});
    Hamburg_polygon.on('dragend',function (e) {Hamburg_overlay.setBounds(Hamburg_polygon.getBounds());
        if(Number(Hamburg_polygon.getBounds().getNorthWest().lat)<54.62726717387009&& Number(Hamburg_polygon.getBounds().getSouthEast().lng)<11.187988728284836
            &&Number(Hamburg_polygon.getBounds().getSouthEast().lat)>52.46189043285914 && Number(Hamburg_polygon.getBounds().getNorthWest().lng)>8.895020425319673)
        {swal({position: 'top-end', text: 'Hamburg', icon:"success", buttons: false, timer: 1000});
            Hamburg_overlay.setBounds(Hamburg.getBounds());
            Hamburg_polygon.dragging.disable();
            mymap.removeLayer(Hamburg);}});

    Brandenburg_polygon.on('drag',function (e) {Brandenburg_overlay.setBounds(Brandenburg_polygon.getBounds());});
    Brandenburg_polygon.on('dragstart',function (e) {Brandenburg_overlay.setBounds(Brandenburg_polygon.getBounds());});
    Brandenburg_polygon.on('dragend',function (e) {Brandenburg_overlay.setBounds(Brandenburg_polygon.getBounds());
        if(Number(Brandenburg_polygon.getBounds().getNorthWest().lat)<53.16045455774706&& Number(Brandenburg_polygon.getBounds().getSouthEast().lng)<15.501953125000002
            &&Number(Brandenburg_polygon.getBounds().getSouthEast().lat)>50.72702815704777 && Number(Brandenburg_polygon.getBounds().getNorthWest().lng)>12.300782144069673)
        {swal({position: 'top-end', text: 'Brandenburg', icon:"success", buttons: false, timer: 1000});
            Brandenburg_overlay.setBounds(Brandenburg.getBounds());
            Brandenburg_polygon.dragging.disable();
            mymap.removeLayer(Brandenburg);}});

    Bremen_polygon.on('drag',function (e) {Bremen_overlay.setBounds(Bremen_polygon.getBounds());});
    Bremen_polygon.on('dragstart',function (e) {Bremen_overlay.setBounds(Bremen_polygon.getBounds());});
    Bremen_polygon.on('dragend',function (e) {Bremen_overlay.setBounds(Bremen_polygon.getBounds());
        if(Number(Bremen_polygon.getBounds().getNorthWest().lat)<54.20822574276112&& Number(Bremen_polygon.getBounds().getSouthEast().lng)<9.942871093750002
            &&Number(Bremen_polygon.getBounds().getSouthEast().lat)>52.03240463975814 && Number(Bremen_polygon.getBounds().getNorthWest().lng)>7.591308593750002)
        {swal({position: 'top-end', text: 'Bremen', icon:"success", buttons: false, timer: 1000});
            Bremen_overlay.setBounds(Bremen.getBounds());
            Bremen_polygon.dragging.disable();
            mymap.removeLayer(Bremen);}});




    mymap.on('zoomend', function(){
        $("#zoom-level").html(mymap.getZoom());
    });

    mymap.on('moveend', function(){
        $("#map-center").html(LatLngToArrayString(mymap.getCenter()));
    });

    mymap.on('mousemove', function(e){
        $("#mouse-location").html(LatLngToArrayString(e.latlng));
    });

    $("#export_exerciseChain").click(function () {
        var txt="<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+'\n';
        txt= txt + "<exercisechain>"+'\n';
        txt= txt + "  <step id=\"1\" displayName=\"Stage 1\" file=\"stage1.xml\" >" +'\n';
        txt= txt + "    <next default=\"repeat\" message=\"Versuche es noch mal.\" >"+ '\n';
        txt= txt + "      <path target=\"end\" result=\"100\" />" + '\n' + "    </next>"+'\n';
        txt= txt + "  </step>"+'\n';
        txt= txt + "</exercisechain>";
        var blob = new Blob([txt], {type: "text/plain;charset=utf-8"});
        saveAs(blob, "exerciseChain.xml");
    });

    $("#export_Stage").click(function () {
        var txt="<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+'\n';
        txt= txt + "<exercise type=\"fillIn\">"+'\n';
        txt= txt + "    <task>"+'\n';
        txt= txt + createXMLStringAufgabe4fill_in_blanks(output,markerarray,Deutschland);
        txt= txt + "    </task>"+'\n';
        txt= txt + "   <skipmessage>" +'\n';
        txt= txt + "   </skipmessage>"+'\n';
        txt= txt + "</exercise>";
        var blob = new Blob([txt], {type: "text/plain;charset=utf-8"});
        saveAs(blob, "stage1.xml");
    });

    function LatLngToArrayString(ll) {
        return "["+ll.lat.toFixed(5)+", "+ll.lng.toFixed(5)+"]";

    }
</script>

</body>
</html>